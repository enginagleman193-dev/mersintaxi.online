<!doctype html>
<html lang="tr">
<head>
  <!-- Google Tag Manager -->
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MTHBHJ4R');
  </script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mersin Taksi | 7/24 Hızlı ve Güvenli Taksi</title>
  <meta name="description" content="Mersin’de 7/24 taksi. Şehir içi ulaşım ve havalimanı transferi. Hemen ara veya WhatsApp’tan yaz." />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MTHBHJ4R"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <img
          src="assets/img/mersin-taksi-logo.png"
          alt="Mersin Taksi"
          style="width:38px;height:38px;border-radius:10px"
        />
        <div>
          <strong>Mersin Taksi</strong>
          <small>7/24 Hizmet</small>
        </div>
      </div>

      <div class="actions">
        <a class="btn btn-outline" href="yorum-yaz">Yorum Yaz</a>

        <a class="btn btn-outline"
           href="https://wa.me/905393180568"
           target="_blank"
           rel="noopener"
           onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_whatsapp'});">
          WhatsApp
        </a>

        <a class="btn btn-primary"
           href="tel:+905393180568"
           onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_call'});">
          Ara
        </a>
      </div>
    </div>
  </header>

  <!-- HERO SLIDER (FULL WIDTH) -->
  <section class="section hero-full">
    <div class="hero-slider" id="heroSlider">

      <div class="hero-slides" id="heroSlides">
        <!-- SLIDE 1 -->
        <div class="hero-slide">
          <img src="assets/img/slider/slide-1.jpg" alt="Mersin Taksi" loading="eager">
          <div class="hero-overlay"></div>
          <div class="hero-checker"></div>
          <div class="hero-content">
            <div class="hero-chips">
              <span class="chip">7/24</span>
              <span class="chip">Mersin</span>
              <span class="chip">Hızlı</span>
            </div>
            <h1 class="hero-title">Mersin’de</h1>
            <p class="hero-sub">Şehrin her noktasında dakikalar içinde yanınızdayız.</p>
          </div>
        </div>

        <!-- SLIDE 2 -->
        <div class="hero-slide">
          <img src="assets/img/slider/slide-2.jpg" alt="7/24 Taksi" loading="lazy">
          <div class="hero-overlay"></div>
          <div class="hero-checker"></div>
          <div class="hero-content">
            <div class="hero-chips">
              <span class="chip">Günün Her Saati</span>
              <span class="chip">Kesintisiz</span>
            </div>
            <h1 class="hero-title">7/24</h1>
            <p class="hero-sub">Gecenin bir yarısı bile tek dokunuşla ulaşın.</p>
          </div>
        </div>

        <!-- SLIDE 3 -->
        <div class="hero-slide">
          <img src="assets/img/slider/slide-3.jpg" alt="Güvenli Taksi" loading="lazy">
          <div class="hero-overlay"></div>
          <div class="hero-checker"></div>
          <div class="hero-content">
            <div class="hero-chips">
              <span class="chip">Güvenli</span>
              <span class="chip">Temiz Araç</span>
              <span class="chip">Deneyimli</span>
            </div>
            <h1 class="hero-title">Güvenli</h1>
            <p class="hero-sub">Temiz araçlar ve deneyimli sürücülerle rahat yolculuk.</p>
          </div>
        </div>

        <!-- SLIDE 4 -->
        <div class="hero-slide">
          <img src="assets/img/slider/slide-4.jpg" alt="Hızlı Taksi" loading="lazy">
          <div class="hero-overlay"></div>
          <div class="hero-checker"></div>
          <div class="hero-content">
            <div class="hero-chips">
              <span class="chip">Hızlı</span>
              <span class="chip">Tek Dokunuş</span>
            </div>
            <h1 class="hero-title">Taksi Hizmeti</h1>
            <p class="hero-sub">Ara veya WhatsApp’tan yaz, hemen dönüş al.</p>
          </div>
        </div>
      </div>

      <!-- SABİT CTA (mobilde gizleniyor olabilir) -->
      <div class="hero-cta">
        <a class="call"
           href="tel:+905393180568"
           onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_call'});">
          Ara
        </a>
        <a class="wa"
           href="https://wa.me/905393180568"
           target="_blank"
           rel="noopener"
           onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_whatsapp'});">
          WhatsApp
        </a>
      </div>

      <div class="hero-dots" id="heroDots" aria-label="Slider noktaları"></div>
    </div>
  </section>

  <main class="container">

    <!-- HİZMETLER -->
    <section class="section">
      <div class="cards">
        <div class="card">
          <h3>Şehir İçi Taksi</h3>
          <p>Mersin genelinde hızlı ve güvenli ulaşım.</p>
        </div>
        <div class="card">
          <h3>Havalimanı Transfer</h3>
          <p>Zamanında, planlı ve konforlu transfer.</p>
        </div>
        <div class="card">
          <h3>Kurumsal Ulaşım</h3>
          <p>Randevulu ve düzenli servis çözümleri.</p>
        </div>
        <div class="card">
          <h3>Gece Hizmeti</h3>
          <p>7/24 güvenli gece yolculuğu.</p>
        </div>
      </div>
    </section>

    <!-- YORUMLAR -->
    <section class="section">
      <div class="slider-head">
        <h2 style="margin:0">Müşteri Yorumları</h2>
        <a class="btn btn-outline" href="yorum-yaz">Yorum Yaz</a>
      </div>

      <!-- CANLI YORUMLAR (Google Sheet -> Apps Script) -->
      <div class="slider" id="reviewsSlider" aria-label="Kaydırmalı yorumlar">
        <div class="small" id="reviewsMsg">Yorumlar yükleniyor…</div>
      </div>

      <div class="note">
        Not: Yorumlar admin onayı ile yayınlanır. Onaylanmayan yorumlar sitede görünmez.
      </div>
    </section>

    <!-- KONUM -->
    <section class="section" id="konum">
      <h2 style="margin:0 0 10px">Konum</h2>
      <div class="card">
        <p class="p" style="margin:0 0 10px">Google Haritalar bağlantınızı buraya gömeceğiz.</p>
        <div class="small">Şimdilik: Haritalar linkini hazır edince ekliyoruz.</div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
      © <span id="y"></span> mersintaxi.online • 7/24 Taksi •
      <a href="gizlilik" style="color:#b7bcc7;text-decoration:underline">Gizlilik Politikası</a>

      <div style="
        margin-top:14px;
        padding-top:12px;
        border-top:1px solid rgba(255,255,255,.08);
        display:flex;
        align-items:center;
        justify-content:center;
        gap:10px;
        flex-wrap:wrap;
        text-align:center;
        font-size:12px;
        color:#b7bcc7;
      ">
        <img
          src="assets/img/aslan-medya.png"
          alt="Aslan Medya"
          style="width:28px;height:28px;border-radius:6px"
        />
        <a
          href="https://mersinyazılım.com"
          target="_blank"
          rel="noopener"
          style="color:#ffd000;font-weight:700"
        >
          Aslan Medya – Web Tasarım
        </a>
      </div>
    </footer>

  </main>

  <script>
    // Yıl
    document.getElementById("y").textContent = new Date().getFullYear();

    // Hero Slider
    (function(){
      const slidesWrap = document.getElementById("heroSlides");
      const dotsWrap = document.getElementById("heroDots");
      if(!slidesWrap || !dotsWrap) return;

      const slides = Array.from(slidesWrap.querySelectorAll(".hero-slide"));
      const total = slides.length;
      if(total === 0) return;

      // Dot'ları üret
      dotsWrap.innerHTML = "";
      const dots = [];
      for(let k=0; k<total; k++){
        const d = document.createElement("div");
        d.className = "hero-dot" + (k===0 ? " active" : "");
        d.style.cursor = "pointer";
        d.setAttribute("aria-label", `Slayt ${k+1}`);
        d.addEventListener("click", () => {
          setActive(k);
          restart();
        });
        dotsWrap.appendChild(d);
        dots.push(d);
      }

      let i = 0;
      let timer = null;

      function setActive(index){
        i = (index + total) % total;
        slidesWrap.style.transform = `translate3d(-${i * 100}%, 0, 0)`;
        dots.forEach((d,idx)=>d.classList.toggle("active", idx === i));
      }

      function restart(){
        if(timer) clearInterval(timer);
        timer = setInterval(()=>setActive(i+1), 4200);
      }

      setActive(0);
      restart();

      document.addEventListener("visibilitychange", ()=>{
        if(document.hidden){
          if(timer) clearInterval(timer);
        } else {
          restart();
        }
      });
    })();

    // Mobil bar scroll ile gizle/göster (CSS'te .is-hidden varsa)
    (function(){
      const bar = document.querySelector('.mobile-bar');
      if(!bar) return;

      let lastY = window.scrollY;
      window.addEventListener('scroll', () => {
        const y = window.scrollY;
        if (y > lastY + 8) bar.classList.add('is-hidden');
        if (y < lastY - 8) bar.classList.remove('is-hidden');
        lastY = y;
      }, {passive:true});
    })();

    // CANLI YORUMLAR (JSONP ile CORS'suz)
    (function loadReviewsJSONP(){
      const REVIEWS_API = "https://script.google.com/macros/s/AKfycbxClFY-pL7sIM_a4_YhJgmYb_eUl5nzdWzL2sRaeEFApGjZh-o23_NUSXp4nFzzTEhHqA/exec";

      function genderClass(g){
        g = (g || "").toLowerCase();
        if (g.includes("erk")) return "avatar-male";
        if (g.includes("kad")) return "avatar-female";
        return "avatar-neutral";
      }

      function escapeHtml(str){
        return String(str || "")
          .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
          .replaceAll('"',"&quot;").replaceAll("'","&#039;");
      }

      function renderReviews(data){
        const wrap = document.getElementById("reviewsSlider");
        const msg  = document.getElementById("reviewsMsg");
        if(!wrap) return;

        if(!data || !data.ok || !Array.isArray(data.items) || data.items.length === 0){
          if(msg) msg.textContent = "Henüz yayınlanmış yorum yok.";
          return;
        }
        if(msg) msg.remove();

        wrap.innerHTML = data.items.map(item => {
          const name = `${item.ad || ""} ${item.soyadMasked || ""}`.trim();
          const puan = Number(item.puan || 0) || 0;

          return `
            <article class="slide">
              <div class="row">
                <div class="avatar ${genderClass(item.cinsiyet)}" aria-hidden="true"></div>
                <div>
                  <div class="name">${escapeHtml(name)}</div>
                  <div class="meta">Mersin • ${escapeHtml(puan)}/5</div>
                </div>
              </div>
              <p class="quote">“${escapeHtml(item.yorum)}”</p>
            </article>
          `;
        }).join("");
      }

      const cb = "cb_reviews_" + Math.random().toString(36).slice(2);
      window[cb] = (data) => {
        renderReviews(data);
        try { delete window[cb]; } catch(e) { window[cb] = undefined; }
        script.remove();
      };

      const script = document.createElement("script");
      script.src = `${REVIEWS_API}?callback=${cb}&t=${Date.now()}`;
      script.onerror = () => {
        const msg = document.getElementById("reviewsMsg");
        if(msg) msg.textContent = "Yorumlar yüklenemedi.";
      };
      document.body.appendChild(script);
    })();
  </script>

  <!-- Mobil Sabit Aksiyon Bar -->
  <div class="mobile-bar">
    <a class="call"
       href="tel:+905393180568"
       onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_call'});">
      Ara
    </a>
    <a class="wa"
       href="https://wa.me/905393180568"
       target="_blank"
       rel="noopener"
       onclick="window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'cta_whatsapp'});">
      WhatsApp
    </a>
  </div>

</body>
</html>
